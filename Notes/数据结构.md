[TOC]



# 数据结构

## 线性表



## 栈与队列



## 串



## 广义表



## 树

/*
AB0DF00G00C0E0H00
*/

```cpp
#include <stdio.h>
#include <stdlib.h>

typedef struct Node {
	char Data;
	struct Node* LC, * RC;
}*BT,BN;

void creat(BT *t) {
	char a;
	a = getchar();
	if (a == '0') { *t = NULL; }
	else {
		*t = (BN*)malloc(sizeof(BN));
		(*t)->Data = a;
		creat(&(*t)->LC);
		creat(&(*t)->RC);
	}
}

void Pre(BT t) {
	if(t){
		printf("%c",t->Data);
		Pre(t->LC);
		Pre(t->RC);
	}
}

void Mid(BT t) {
	if (t) {
		Mid(t->LC);
		printf("%c", t->Data);
		Mid(t->RC);
	}
}

void Pos(BT t) {
	if (t) {
		Pos(t->LC);
		Pos(t->RC);
		printf("%c", t->Data);
	}
}

int sum(BT t) {
	if (t == NULL) return 0;
	return sum(t->LC) + sum(t->RC) + 1;
}

int leaf(BT t) {
	if (t == NULL) return 0;
	if (t->LC == NULL && t->RC == NULL) return 1;
	return leaf(t->LC) + leaf(t->RC);
}

int depth(BT t) {
	if (t == NULL) return 0;
	return max(depth(t->LC), depth(t->RC)) + 1;
}

int main() {
	BT t;
	creat(&t);

	printf("\nPre:");Pre(t);
	printf("\nMid:"); Mid(t);
	printf("\nPos:"); Pos(t);

	printf("\n\nsum = %d\n", sum(t));
	printf("leaf = %d\n", leaf(t));
	printf("depth = %d\n", depth(t));

	return 0;
}
```





## 图



## 查找



## 排序





## 实训

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define Max_Size 10010		//设置存储最大容量
const int Mod = 10003;		//对质数取模减少冲突
char* file = "data.txt";	//数据存档位置

//建立单链表存储数据
typedef struct HashList {
	long long num;
	char name[100];
	char address[100];
	struct HashList* Next;
}HL;
HL L[Max_Size];

//函数：初始化单链表
void InitHashList() {
	for (int i = 0; i < Max_Size; i++) {
		L[i].Next = NULL;
	}
}

//函数：哈希值计算
int HashKey(long long n) {
	int k = (n % Mod + Mod) % Mod;
	return k;
}

//函数：查找
HL *find(long long n) {
	int k = HashKey(n);
	HL* p = NULL;
	p = L[k].Next;
	while(p != NULL){
		if (p->num == n) return p;
		p = p->Next;
	}
	return &L[k];
}

//函数：显示联系人信息
void ShowInfo(HL *p) {
	printf("哈希值为：%d\n",HashKey(p->num));
	printf("电话：%lld\n", p->num);
	printf("姓名：%s\n", p->name);
	printf("地址：%s\n", p->address);
}

//函数：通过手机号创建联系人
void Create(long long n) {
	int k = HashKey(n);
	if (find(n) != &L[k]) {
		HL *p = find(n);
		printf("该联系人已经存在,要修改信息？   1-是，0-否\n");
		int opt;
		scanf("%d", &opt);
		if (opt == 0) return;
		else {
			printf("请输入姓名：");
			scanf("%s", p->name);
			printf("请输入地址：");
			scanf("%s", p->address);
			printf("\n修改完成");
			return;
		}
	}
	HL *t = (HL*)malloc(sizeof(HL));
	t->num = n;
	printf("请输入姓名：");
	scanf("%s", t->name);
	printf("请输入地址：");
	scanf("%s", t->address);
	printf("\n创建完成");
	t->Next = L[k].Next;
	L[k].Next = t;
}

//函数：导入数据创建联系人
void TeCreate(long long n, char name[], char address[]) {
	HL* p;
	p = (HL*)malloc(sizeof(HL));
	int k = HashKey(n);
	p->num = n;
	strcpy(p->name, name);
	strcpy(p->address, address);
	p->Next = L[k].Next;
	L[k].Next = p;
}

//函数：导入文件
void OpenFile() {
	FILE* f;
	f = fopen(file, "r");
	if (f == NULL) {
		f = fopen("data.txt", "w+");
	}

	long long n;
	char name[100], address[100];

	while (fscanf(f, "%lld %s %s", &n, name, address) != EOF) {
		TeCreate(n, name, address);
	}
}

//函数：检查输入电话合法性
long long CheckNum(char str[]) {
	if (strlen(str) > 16) return - 1;
	for (int i = 0; i < strlen(str); i++) {
		if (str[i] < '0' || str[i] > '9') return -1;
	}
	return atoll(str);
}

//功能1：查找联系人
void Search() {
	system("cls");
	printf("\n=====查找联系人====\n\n");
	char sname[100];
	printf("请输入要查找的姓名：");
	scanf("%s", &sname);
	HL* p = (HL*)malloc(sizeof(HL));
	for (int i = 0; i < Max_Size; i++) {
		p = L[i].Next;
		while (p != NULL) {
			if (strcmp(p->name,sname) == 0) {
				printf("%s\n", p->name);
				ShowInfo(p);
				return;
			}
			p = p->Next;
		}
	}
	printf("未找到该联系人,是否创建？   1-是，0-否\n");
	int opt;
	scanf("%d", &opt);
	if (opt == 0) return;

	printf("请输入电话号码：");
	long long n;
	char str[100];
	scanf("%s", str);
	n = CheckNum(str);
	if (n <= 0) { printf("\n输入无效！\n\n"); return; }
	printf("请输入住址：");
	char address[100];
	scanf("%s", address);
	TeCreate(n, sname, address);
	printf("\n创建成功");
}

//功能2：新建联系人
void NewContact() {
	system("cls");
	printf("\n=====新建联系人====\n\n");
	printf("请输入电话号码：");
	long long telnum;
	char str[100];
	scanf("%s", str);
	telnum = CheckNum(str);

	if (telnum <= 0) { printf("\n输入无效！\n\n");return; }
	else Create(telnum);
}

//功能3：修改联系人
void Change() {
	system("cls");
	printf("\n=====修改联系人====\n\n");
	printf("请输入手机号：");
	long long n;
	char str[100];
	scanf("%s", str);
	n = CheckNum(str);
	if (n <= 0) { printf("\n输入无效！\n\n"); return; }

	HL* p = find(n);
	int k = HashKey(n);
	if (p == &L[k]) {
		printf("联系人不存在\n");
	}
	else {
		printf("请输入姓名：");
		scanf("%s", p->name);
		printf("请输入地址：");
		scanf("%s", p->address);
		printf("\n修改完成");
		return;
	}
}

//功能4：删除联系人
void Delete() {
	system("cls");
	printf("\n=====删除联系人====\n\n");
	printf("请输入姓名：");
	char name[100];
	scanf("%s", name);
	for (int i = 0; i < Max_Size;i++) {
		HL* p = (HL*)malloc(sizeof(HL));
		p = &L[i];
		while (p->Next != NULL) {
			if (strcmp(p->Next->name,name) ==0 ) { 
				p->Next = p->Next->Next; 
				printf("删除成功！\n"); 
				return; 
			}
			p = p->Next;
		}
	}
	printf("未查找到此用户\n");
}

//功能5：查看联系人目录
void ShowALL() {
	system("cls");
	printf("\n=====联系人目录====\n\n");
	int cnt = 0;
	for (int i = 0; i < Max_Size; i++) {
		HL* p = L[i].Next;
		while (p != NULL) {
			printf("电话：%lld\n", p->num);
			printf("姓名：%s\n", p->name);
			printf("住址：%s\n\n", p->address);
			printf("--------------------\n\n");
			cnt++;
			p = p->Next;
		}
	}
	if (cnt == 0) printf("联系人目录为空\n");
}

//功能6：清空联系人目录
void ClearAll() {
	system("cls");
	printf("\n=====清空联系人目录====\n\n");
	printf("再次确认是否清空！   1-是，0-否\n");
	int opt;
	scanf("%d", &opt);
	if (opt == 0) return;

	for (int i = 0; i < Max_Size; i++) {
		L[i].Next = NULL;
	}
	printf("清空完成！\n");
}

//功能0：退出并保存系统
int WriteQuit() {
	system("cls");
	printf("\n=====退出并保存====\n\n");
	
	FILE* fp = NULL;

	if ((fp = fopen(file, "w")) == NULL) {
		printf("Open file [%s] failed!\n");
		return -1;
	}

	for (int i = 0; i < Max_Size; i++) {
		HL* p = L[i].Next;
		while (p != NULL) {
			fprintf(fp, "%lld\n", p->num);
			fprintf(fp, "%s\n", p->name);
			fprintf(fp, "%s\n\n", p->address);
			p = p->Next;
		}
	}
	printf("\n欢迎再次使用！\n\n");
	fclose(fp);
}

//功能：显示主菜单
void ShowMenu() {
	printf("\n\n\n");
	printf("     哈希通讯录管理系统\n");
	printf(" ╔═══════════════════════╗\n");
	printf(" ║                       ║\n");
	printf(" ║   1->查找联系人       ║\n");
	printf(" ║   2->新建联系人       ║\n");
	printf(" ║   3->修改联系人       ║\n");
	printf(" ║   4->删除联系人       ║\n");
	printf(" ║   5->查看联系人目录   ║\n");
	printf(" ║   6->清空联系人目录   ║\n");
	printf(" ║   0->保存并退出系统   ║\n");
	printf(" ║                       ║\n");
	printf(" ╚═══════════════════════╝\n");
	printf("\n请输入要执行的操作：");
}

//主菜单
void MainMenu() {//主菜单
	int op = 1;
	char strop[100];
	while (op) {
		system("cls");
		ShowMenu();
		scanf("%s", strop);
		op = CheckNum(strop);
		switch (op) {
		case 0: WriteQuit(); break;
		case 1: Search(); break;
		case 2: NewContact(); break;
		case 3: Change(); break;
		case 4: Delete(); break;
		case 5: ShowALL(); break;
		case 6: ClearAll(); break;
		
		default:
			printf("\n输入有误，请重新输入。");
			break;
		}
		system("pause");
	}
}

int main() {		
	InitHashList();	//初始化哈希链表
	OpenFile();		//读取文件
	MainMenu();		//主功能入口
	
	return 0;
}
```

