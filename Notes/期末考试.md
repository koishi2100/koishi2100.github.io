# 操作系统

## 选择题

1、引入多道程序设计技术的前提条件之一是系统具有（ ==B== ）。

> A.SPOOLing技术      B.中断功能 
> C.分时功能       		 D.多个CPU

2、操作系统是一种（ ==B== ）。

> A、 应用软件      B、 系统软件
> C、 通用软件      D、 工具软件

3、安装了操作系统的计算机比原来物理计算机的功能更加强大，我们将这种逻辑上的计算机，称为（ ==C== ）计算机。

> A、 物理       B、 逻辑 
> C、 虚拟       D、 真实

4、以下关于操作系统的描述错误的是（ ==C== ）

> A、操作系统提供了可交互的UI界面
> B、操作系统是文件资源的管理者
> C、操作系统软件资源的管理者但不是硬件资源的管理者
> D、操作系统是进程的管理者

5、操作系统内核与用户程序、应用程序之间的接口是（ ==C== ）。

> A、 SHELL命令     B、 图形界面 
> C、 系统调用    	 D、 C语言函数

6、信号量S的初值为8，在S上执行10次P操作，6次V操作后，S的值为（ ==D== ）。

> A、10   	B、8 
> C、6   	  D、4

7、利用PV操作可以（ ==A==`?可能填空题` ）。

> A、实现进程同步      B、实现进程异步 
> C、解除死锁     		D、防止死锁

8、某计算机系统中有10台打印机，由K个进程竞争使用，每个进程最多需要3台打印机。该系统可能会发生死锁的K的最小值是（ ==B== ）。`资源数<k*(3-1)+1 可能产生死锁,2k>9即k>4.5`

> A、6 		B、5 
> C、4 		D、3

9、并发性是指若干事件在（ ==C== ）发生。

> A.同一时刻 				B.不同时刻 
> C.同一时间间隔内 	 D.不同时间间隔内

10、在引入线程的操作系统中，以下描述正确的是（ ==B== ）

> A、线程是资源分配的基本单位，进程是CPU调度的基本单位
> B、进程是资源分配的基本单位，线程是CPU调度的基本单位
> C、线程和进程是资源分配的基本单位
> D、线程和进程是CPU调度的基本单位

11、在哲学家进餐问题中，假设同时存在长者、年幼者和成年者，当长者或者年幼者想要进餐时，如果筷子数不够，可以直接获取最近的成年者手中的筷子，破坏的是死锁的必要条件中的（ ==B== ），若长者先拿左边的、年幼者和成年者先拿右边的筷子，破坏的是死锁的必要条件中的（ ==D== ）。

> A、互斥 			B、不可剥夺 
> C、部分分配  	D、存在环路

12、在时间片轮转（RR）调度算法中，若时间片过短，可能导致（ ==C== ）。

> A、进程饥饿（Starvation） 	B、系统吞吐量下降
> C、上下文切换开销过大		  D、长进程无法完成

13、内存存储空间的浪费主要有哪些形式？（ ==AB==`?可能填空题` ）

> A、内部碎片 	B、外部碎片 
> C、连续碎片 	D、离散碎片

14、在请求分页式存储管理中，页面淘汰是由于（ ==A== ）引起的。

> A、缺页 			B、内存不足 
> C、CPU请求 	D、中断

15、文件的逻辑结构是为了方便( ==D== )而设计的。

> A.存储介质特性 	 B.操作系统的管理方式
> C.主存容量 			D.用户

16、下列描述不是文件系统功能的是（ ==C== ）。

> A、建立文件目录和维护		 B、提供一组可供用户使用的文件操作
> C、实现对磁盘的驱动调度 	D、实现从逻辑文件到物理文件间的转换

17、操作系统采用缓冲技术，能够减少对CPU的（ ==A== ）次数，从而提高资源的利用率。

> A、中断 	B、访问 
> C、控制 	D、依赖

18、缓冲技术用于（ ==A== ）。

> A、提高主机和设备交换信息的速度
> B、提供主、辅存接口
> C、提高设备利用率
> D、扩充相对地址空间

19、单道批处理系统的主要缺点是( ==B== )。

> A、失去了交互性		B、CPU利用率不高
> C、不具备并行性		D、以上都不是

20、系统为某进程分配了4个页框，该进程已访问的页号序列为0，2，9，3，4，2，8，2，4，8，4，5。若进程要访问的下一页的页号为7，依据LRU算法，应淘汰页的页号是(  ==C==  )。

> A.4       	B.3
> C.2      	 D.8



## 填空题

1、高铁售票操作系统的类型属于 ==软实时系统== ，新能源汽车中的智能驾驶系统中的自动刹车系统的类型属于 ==硬实时系统==

2、操作系统的命令控制方式中，根据交互能力可分为 ==联机命令控制方式== 和 ==脱机命令控制方式==

3、在一个单CPU系统中，若有7个用户进程。假设当前系统为用户态，则处于就绪状态的用户进程最多有 ==6== 个，最少有 ==0== 个。

4、特权指令的执行是要CPU处于 ==管态== 状态下才可以执行。非特权指令的执行是要CPU处于 ==目态== 状态下才可以执行。

**必考** 5、如果3个进程共享一个互斥端，每次最多可以允许2个进程进入互斥段，则信号量应该设置为 ==2== `（S=2，S的变化范围为[-1,2]）`

6、系统调用是由操作系统提供的内部调用，只能通过 ==用户程序== 间接使用

7、一个时间段内只允许一个进程使用的资源称为 ==临界资源== 。

8、短作业优先调度算法是否会导致饥饿？（ ==会== ）

9、 ==时间片轮转== 调度算法可以让各个进程得到及时的响应。

10、在 ==短作业优先== 调度算法中，总是选择当前剩余运行时间最短的进程执行。

11、存储管理中的对换技术是为了解决 ==内存紧张== 问题而提出来的。

12、如果采用分页式管理，页面大小为4KB，逻辑地址0的对应的转换成的物理地址是 ==8192== 。`（物理地址 = 块号 × 页面大小 + 页内偏移量=2×4096+0=8192）`

| 页号 | 块号 |
| :--- | :--- |
| 0    | 2    |
| 1    | 1    |
| 2    | 7    |

13、分页存储管理系统中，页表存放于内存中，内存访问时间为4μs。若不引入快表，根据逻辑地址访问一次数据的时间是 ==8== μs。若引入快表，检索快表时间为0.5μs。若快表的命中率为80%，且忽略快表更新时间，则有效访问时间是 ==5.3== μs。`4+4=8us  0.8*4.5+0.2*8.5=5.3us`

14、在内存的动态分区分配管理中，相邻的空闲块会进行合并，当回收某个内存块之后，若空闲块的数量增加了一个，则该内存块和空闲块的上下邻接情况是： ==上下均无空闲邻接==；若空闲块的数量减少了一个，则该内存块和空闲块的上下邻接情况是： ==上下均有空闲邻接==。

15、若用8个字（字长32位）组成的位示图（所有编号从1开始）管理内存，假定用户归还块号为100的内存块时，它对应位示图的位置为 ==字号为4，块号为4==。$\lfloor\frac{99}{32}\rfloor +1，(99\%32)+1$

16、文件系统为每个文件另建立一张指示逻辑记录和物理块之间的对应表，由此表和文件本身构成的文件是 ==索引文件==

17、数据库文件的逻辑结构形式是 ==记录式文件==。

18、文件系统采用两级索引分配方式。若每个磁盘块的大小为4KB， 每个盘块号占4B, 则该系统中，单个文件的最大长度是 ==4096MB==  `(1K*1K*4KB=4GB=4096MB)`，$一级：\frac{4096字节}{4字节/条目}=1K个条目，二级：1K*1K=1M个条目，最大长度=1M*4KB=4096MB$

19、单级文件目录不允许 ==一个文件夹中存在同名文件== 。

20、某文件系统的簇和磁盘扇区大小分别为1KB和512B。若一个文件的大小为1026B，则系统分配给该文件的磁盘空间大小是 ==2048B== 。`(1026B>1024B，所以需要两个簇来存储这个文件，一簇是1KB=1024B)`

21、通常，缓冲池位于 ==主存储器== 中

**必考** 22、某文件占10个磁盘块，现要把该文件磁盘块逐个读入主存缓冲区，并送用户区进行分析，假设一个缓冲区与一个磁盘块大小相同，把一个磁盘块读入缓冲区的时间为100us，将缓冲区的数据传送到用户区的时间是50us，CPU 对一块数据进行分析的时间为50us。在单缓冲区和双缓冲区结构下，读入并分析完该文件的时间分别是 ==1550== us 和 ==1100== us。
$对于第十个块：150\times 9(读入开始)+100(读入结束)+50(传输结束)+50(分析结束)=1550$、
$对于第十个块：100\times 9(读入开始)+100(读入结束)+50(传输结束)+50(分析结束)=1100$

23、在一个计算机系统中，指令分为 ==特权指令== 、  ==非特权指令== 。



## 简答题

1、操作系统一般为用户提供了哪三种接口？

> (1)图形用户接口：通过视觉元素实现用户交互。用户使用鼠标、触摸屏等设备直接操作图形对象，无需记忆命令
> (2)命令行接口：用户通过文本命令与系统交互。需输入特定指令并接收文本反馈。
> (3)程序接口：供程序员通过 API 调用操作系统功能。以函数库形式提供。

2、操作系统有哪几大特征？其最基本的特征是什么？

> ①并发性   ②共享性   ③虚拟性   ④异步性
> 其最基本的特征是并发性，是其他特征存在的前提和基础。

3、画出进程三种主要状态的状态转换图，并在图中注明状态发生变化原因。

> <img src="https://note.youdao.com/yws/api/personal/file/A61F5B5322ED49038C64BDD82D341987?method=download&shareKey=5967e74b9690c236b3ff1f73ac3e4433" alt="进程五种状态转换图" style="zoom: 67%;" /> 

4、简要描述进程和线程之间的联系和区别。

> 联系：①包含关系：线程是进程的组成部分。
> ②资源共享：同一进程内的线程共享进程的资源。
> ③依赖关系：进程的状态影响线程。
>
> 区别：①并发性：进程间可并发执行。同一进程内的线程可并发执行。
> ②独立性：进程间独立性高，互不干扰。线程间独立性低。
> ③调度单位：进程是资源分配的基本单位。线程是操作系统进行调度和执行的基本单位。

**必考** 5、在读者写者问题中如何保证一个Writer进程必须与其他进程互斥地访问共享对象的同步问题？
（1）如何设置信号量？
（2）writer进程和reader进程应该如何管理？

> （1）设置三个信号量：
> `rw_mutex`：控制读写互斥（初始值=1），确保写操作独占访问
> `mutex`：保护读者计数器（初始值=1），防止并发修改
> `queue`：公平排队信号量（初始值=1），避免写者饥饿
>
> （2）进程管理方案
>
> ```c
> //写者进程
> P(queue);    // 进入公平队列
> P(rw_mutex); // 获取写锁
> /* 执行写操作 */
> V(rw_mutex); // 释放写锁
> V(queue);    // 退出队列
> ```
>
> ```cpp
> //读者进程
> P(queue);    // 进入公平队列
> P(mutex);    // 锁定计数器
> if (++read_count == 1) 
> 	P(rw_mutex); // 首个读者获取写锁
> V(mutex);
> V(queue);    // 退出队列
> /* 执行读操作 */
> P(mutex);
> if (--read_count == 0) 
> 	V(rw_mutex); // 末位读者释放写锁
> V(mutex);
> ```

6、一个放粽子游戏：爸爸不停地向一个纸盒中放入甜粽子或者咸粽子。姐姐只取甜粽子，若没有则等待。妹妹只取咸粽子，若没有咸粽子则等待。盒子一次只能伸进去一只手，纸盒一次只能放入一样物体(最多n个)，若盒子已满，则爸爸等待。请用PV操作描述三者的进程，并说明信号量的含义和初值。

> 信号量设置及初值：
> 1、`mutex`：互斥信号量，控制对盒子的互斥访问（一次只能伸入一只手），初值 = 1。
> 2、`empty`：同步信号量，表示盒子剩余空位数，初值 = n（盒子容量）。
> 3、`sweet`：同步信号量，表示甜粽子数量，初值 = 0。
> 4、`salty`：同步信号量，表示咸粽子数量，初值 = 0。
>
> 进程管理（PV操作描述）：
>
> ```c
> //爸爸进程（生产者）
> while (true) {
>     P(empty);       // 等待空位
>     P(mutex);       // 申请进入盒子
>     /* 随机放入甜粽或咸粽 */
>     if (放入甜粽) 
>         V(sweet);   // 甜粽子+1，唤醒姐姐
>     else 
>         V(salty);   // 咸粽子+1，唤醒妹妹
>     V(mutex);       // 离开盒子
> }
> ```
>
> ```c
> //姐姐进程（甜粽子消费者）
> while (true) {
>     P(sweet);       // 等待甜粽子
>     P(mutex);       // 申请进入盒子
>     /* 取甜粽子 */
>     V(empty);       // 释放空位
>     V(mutex);       // 离开盒子
>     /* 吃甜粽子 */
> }
> ```
>
> ```c
> //妹妹进程（咸粽子消费者）
> while (true) {
>     P(salty);       // 等待咸粽子
>     P(mutex);       // 申请进入盒子
>     /* 取咸粽子 */
>     V(empty);       // 释放空位
>     V(mutex);       // 离开盒子
>     /* 吃咸粽子 */
> }
> ```

7、简要描述设备与主机交换信息的四种控制方式

> ①程序查询方式：CPU通过循环查询设备状态，主动控制数据传输，全程参与每个字节的读写。
> ②中断控制：设备完成数据传输后向CPU发送中断请求，CPU响应后处理数据，无需持续查询。
> ③DMA方式：通过DMA控制器接管CPU的内存访问权，直接在设备与内存间传输数据，仅传输完成时通知CPU。
> ④通道控制：专用的I/O处理器（通道）独立执行通道程序，控制多台设备的I/O操作，CPU仅需发起指令。



## 计算题

1、在一个单道批处理系统中,一组作业的提交时刻和运行时间如下表所示:

| 作业 | 提交时间 | 运行时间 |
| ---- | -------- | -------- |
| 1    | 6：00    | 60min    |
| 2    | 6：40    | 40min    |
| 3    | 7：10    | 20min    |
| 4    | 7：20    | 10min    |

试计算以下2种作业调度算法的每个作业的平均周转时间T和平均带权周转时间W。
（1）先来先服务；
（2）响应比高者优先

> **(1) 先来先服务（FCFS）算法**
> 作业按提交顺序执行：作业1 → 作业2 → 作业3 → 作业4。
>
> **作业执行过程**：
>
> - 作业1：提交时间 6:00，开始时间 6:00，完成时间 = 6:00 + 60 min = 7:00。
>   $T_1=7:00−6:00=60 min，W_1=60/60=1。$
> - 作业2：提交时间 6:40，开始时间 7:00（作业1完成后），完成时间 = 7:00 + 40 min = 7:40。
>   $T_2=7:40−6:40=60min，W_2=60/40=1.5。$
> - 作业3：提交时间 7:10，开始时间 7:40（作业2完成后），完成时间 = 7:40 + 20 min = 8:00。
>   $T_3=8:00−7:10=50min，W_3=50/20=2.5。$
> - 作业4：提交时间 7:20，开始时间 8:00（作业3完成后），完成时间 = 8:00 + 10 min = 8:10。
>   $T_4=8:10−7:20=50min，W_4=50/10=5.$
>
> **平均值计算**：
>
> - 总周转时间$ = 60+60+50+50=220 min$，
>   $T_{avg}=220/4=55 min$
> - 总带权周转时间 $= 1+1.5+2.5+5=10$，
>   $W_{avg}=10/4=2.5$
>

> **(2) 响应比高者优先（HRRN）算法**
>
> 响应比 $R=1+\frac{等待时间}{运行时间}$。CPU空闲时，选择响应比最高的作业执行。
>
> 作业按执行顺序：作业1 → 作业2 → 作业4 → 作业3。
>
> **作业执行过程**：
>
> - 初始时（6:00），只有作业1提交，执行作业1：
>   开始时间 6:00，完成时间 7:00。
>   $T_1=60 min，W_1=1。$
> - CPU空闲（7:00），就绪作业：作业2（提交时间 6:40 < 7:00）。作业3和作业4未提交（提交时间 > 7:00），执行作业2：
>   开始时间 7:00，完成时间 7:40。
>   $T_2=60min，W_2=1.5。$
> - CPU空闲（7:40），就绪作业：作业3（提交时间 7:10）、作业4（提交时间 7:20）。计算响应比：
>   - 作业3：等待时间$ = 7:40 - 7:10 = 30 min，R_3=1+30/20=2.5$。
>   - 作业4：等待时间$ = 7:40 - 7:20 = 20 min，R_4=1+20/10=3。$
>     选择响应比更高的作业4执行：
>     开始时间 7:40，完成时间 7:50。
>     $T_4=7:50−7:20=30 min，W_4=30/10=3。$
> - CPU空闲（7:50），执行作业3：
>   开始时间 7:50，完成时间 8:10。
>   $T_3=8:10−7:10=60 min，W_3=60/20=3$
>
> **平均值计算**：
>
> - 总周转时间 $= 60+60+60+30=210min，$
>   $T_{avg}=210/4=52.5 min。$
> - 总带权周转时间$ = 1+1.5+3+3=8.5，$
>   $W_{avg}=8.5/4=2.125$



**必考** 2、有一个具有两道作业的批处理系统，作业调度采用短作业优先的调度算法，进程调度采用以优先数为基础的非抢占式调度算法。下表所列的作业优先数即为进程优先数，优先数越小优先级越高。

| 作业名 | 到达时间 | 估计运行时间 | 优先数 |
| ------ | -------- | ------------ | ------ |
| A      | 8:00     | 35分         | 8      |
| B      | 8:20     | 25分         | 5      |
| C      | 8:35     | 35分         | 2      |
| D      | 8:50     | 5分          | 7      |

（1）列出所有作业进入内存时间及结束时间。
（2）计算平均周转时间。

> **(1) 作业进入内存时间及结束时间**
>
> $A\to C\to B \to D$
>
> | 作业名 | 进入内存时间 | 结束时间 | 到达时间 | 周转时间 | 说明（可不写，解释作用）           |
> | :----- | :----------- | :------- | -------- | -------- | :--------------------------------- |
> | A      | 8:00         | 8:35     | 8:00     | 35       | 第一个到达，直接进入内存并运行完成 |
> | C      | 8:35         | 9:10     | 8:35     | 35       | A完成后调入内存，优先级高先运行    |
> | B      | 8:20         | 9:35     | 8:20     | 75       | 内存有空位时进入，等待进程调度     |
> | D      | 9:10         | 9:40     | 8:50     | 50       | C完成后调入内存，优先级低后运行    |
>

> **(2) 平均周转时间计算**
>
> 周转时间 = 结束时间 - 到达时间
>
> - **A**：8:35 - 8:00 = 35 分钟
> - **B**：9:35 - 8:20 = 75 分钟
> - **C**：9:10 - 8:35 = 35 分钟
> - **D**：9:40 - 8:50 = 50 分钟
>
> 周转时间 = 35+75+35+504=195分钟
> 平均周转时间 = 48.75分钟




3、假设磁盘共有200个柱面，编号从0~199。当前存取臂在120号柱面上服务，并刚刚完成了105号柱面的请求。如果现有进程P1、P2、P3和P4分别请求的柱面号186，158，115，90。按下列3种算法调度时，试问:
（1）系统调度的次序是什么?
（2）存取臂移动总量为多少?

> (1)先来先服务算法：系统调度的次序是P1，P2，P3, P4。
> 存取臂移动总量是(186-120)+(186-158)+(158-115)+(115-90)=162。
>
> (2) 最短查找时间优先算法：系统调度的次序是P3，P4，P2，P1.
> 存取臂移动总量是(120-115)+(115-90)+(158-90)+(186-158)=126。
>
> (3)电梯调度算法：系统调度的次序是P2 , P1 , P3 , P4。
> 存取臂移动总量是(158-120)+(186-158)+(186-115)+(115-90)=159。





